(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{114:function(e,t,n){},119:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(56),s=n.n(c),o=(n(64),n(4)),u=n(1),i=n.n(u),l=n(2),m=n(20),p=n.n(m),_=n(10),f=n.n(_),h=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/channels");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/channels",{name:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/channels/".concat(t,"/messages"));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={content:t,channel_id:n},e.next=3,f.a.post("/api/messages",a);case 3:return r=e.sent,c=r.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,password:n},e.next=3,f.a.post("/api/auth/signin",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,password:n},e.next=3,f.a.post("/api/auth/signup",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/whoami");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=n(15),x=(n(114),function(e){var t=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(o.a)(c,2),u=s[0],m=s[1],p=Object(a.useState)(!0),_=Object(o.a)(p,2),f=_[0],h=_[1];return[n,u,r,m,function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f){e.next=6;break}return e.next=4,E(n,u);case 4:e.next=8;break;case 6:return e.next=8,g(n,u);case 8:t(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),f,h]}(),n=Object(o.a)(t,7),c=n[0],s=n[1],u=n[2],m=n[3],p=n[4],_=n[5],f=n[6],h=function(e){u(e)},d=function(e){m(e)},v=function(t){t.preventDefault(),p(e.setShouldTriggerAuth)};return r.a.createElement("div",{className:"form__container"},r.a.createElement("h2",{className:"form__title"},_?"Connexion":"Inscription"),_?r.a.createElement("form",{onSubmit:v,className:"form__container__content"},r.a.createElement("label",null,"Nom d'utilisateur :"),r.a.createElement("input",{className:"form__input",name:"username",type:"text",placeholder:"Nom d'utilisateur",value:c,onChange:function(e){return h(e.target.value)}}),r.a.createElement("label",null,"Mot de passe :"),r.a.createElement("input",{className:"form__input",name:"password",type:"password",placeholder:"Mot de passe",value:s,onChange:function(e){return d(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"btn__submit"},"Connexion")):r.a.createElement("form",{onSubmit:v,className:"form__container__content"},r.a.createElement("label",null,"Choisissez un nom d'utilisateur :"),r.a.createElement("input",{className:"form__input",name:"username",type:"text",placeholder:"Nom d'utilisateur",value:c,onChange:function(e){return h(e.target.value)}}),r.a.createElement("label",null,"Choisissez un mot de passe :"),r.a.createElement("input",{className:"form__input",name:"password",type:"password",placeholder:"Mot de passe",value:s,onChange:function(e){return d(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"btn__submit"},"Inscription")),r.a.createElement("button",{onClick:function(){f(!_)},className:"btn__switch"},_?"Pas encore de compte ? Inscrivez-vous ! ":"Vous avez d\xe9j\xe0 un compte ? Connectez-vous !"))}),C=n(9),j=(n(28),function(e){console.log("useMessages");var t=e,n=Object(a.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],u=Object(a.useState)(""),m=Object(o.a)(u,2),_=m[0],f=m[1],h=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(_,t);case 2:return e.next=4,d(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("_fetcheMessages"),e.t0=s,e.next=4,v(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){console.log("useEffect");var e=p()("");return d(t),function(e,t){e.on("sendMessageToClient",(function(e){d(t),console.log("message from serv",e)}))}(e,t),function(){e.disconnect()}}),[e]),{messages:c,createMessage:h,contentValue:_,setContentValue:f}}),O=n(29);var y=function(e){var t=j(e.match.params.id),n=t.messages,a=t.createMessage,c=t.contentValue,s=t.setContentValue,o=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a();case 3:s("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container__chat"},r.a.createElement("div",{className:"container__chat__messages"},n&&n.map((function(e,t){return r.a.createElement("div",{className:"container__message",key:e.id},Object(O.isUsernameAndHourNeedToBeDisplayed)(t-1,e,n)&&r.a.createElement("div",{className:"username__message"},r.a.createElement("p",{className:"username"},e.username),r.a.createElement("p",{className:"hour"},Object(O.formatHour)(e.updated_at))),r.a.createElement("p",{className:"content_message"},e.content))}))),r.a.createElement("div",{className:"container__chat__sendBox"},r.a.createElement("form",{className:"form__chat__sendbox",onSubmit:o},r.a.createElement("input",{className:"input__chat__sendbox",placeholder:"Envoyer un message",value:c,onChange:function(e){s(e.target.value)}}),r.a.createElement("button",{className:"button__chat__sendbox",type:"submit"},"Envoyer"))))};var k=function(){return r.a.createElement("div",{className:"container__chat"},r.a.createElement("p",null,"No chat selected"))},S=function(){return r.a.createElement("div",{className:"container__chat"},r.a.createElement(C.c,null,r.a.createElement(C.a,{exact:!0,path:"/",component:k}),r.a.createElement(C.a,{exact:!0,path:"/channel/:id",component:y})))},M=(n(119),function(){var e=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(o.a)(c,2),u=s[0],m=s[1],_=Object(a.useState)(""),f=Object(o.a)(_,2),v=f[0],b=f[1],E=Object(a.useState)(!1),g=Object(o.a)(E,2),w=g[0],x=g[1],C=Object(a.useState)({}),j=Object(o.a)(C,2),O=(j[0],j[1]);Object(a.useEffect)((function(){var e=p()("");return function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:k();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),S(e),function(){e.disconnect()}}),[w]);var y=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N().then((function(e){O(e),x(!1)})).catch((function(e){404===e.response.status&&x(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,h();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){e.on("sendChannelToClient",(function(e){k(),console.log("channel from serv",e)}))};return[n,u,function(){m(!u)},function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(v);case 2:return m(!u),e.next=5,k();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v,b,w,x]}(),t=Object(o.a)(e,8),n=t[0],c=t[1],s=t[2],u=t[3],m=t[4],_=t[5],f=t[6],v=t[7];return!0===f?r.a.createElement("div",{className:"container__modalCreateChannel"},r.a.createElement(x,{setShouldTriggerAuth:v})):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container__channels"},r.a.createElement("div",{className:"container__channels__containerTitle"},r.a.createElement("p",{className:"container__channels__title"},"Channels"),r.a.createElement("button",{onClick:s,className:"container__channels__button"},r.a.createElement("span",{className:"container__channels__button__icon"},"+"))),r.a.createElement("ul",{className:"container__channels__list"},0!==n.length&&n.map((function(e){return r.a.createElement(w.b,{key:e.id,to:"/channel/".concat(e.id),className:"container__channels__list__element"},r.a.createElement("li",{className:"container__channels__list__label"},"# ",e.name))})))),r.a.createElement(S,null),!0===c?r.a.createElement("div",{className:"container__modalCreateChannel"},r.a.createElement("div",{className:"container__modalCreateChannel__contentContainer"},r.a.createElement("div",{className:"container__modalCreateChannel__contentContainer__Header"},r.a.createElement("span",{className:"container__modalCreateChannel__contentContainer__Header__title"},"Create a channel"),r.a.createElement("button",{onClick:s,className:"container__channels__button"},r.a.createElement("span",{className:"container__channels__button__icon"},"X"))),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u()},className:"container__modalCreateChannel__contentContainer__form"},r.a.createElement("input",{placeholder:"Nom du channel",value:m,onChange:function(e){_(e.target.value)},className:"container__modalCreateChannel__contentContainer__form__input"}),r.a.createElement("button",{className:"container__modalCreateChannel__contentContainer__form__btn",type:"submit"},"Valider")))):null)});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(120).config(),s.a.render(r.a.createElement(w.a,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},28:function(e,t,n){},29:function(e,t){var n=function(e){var t,n=new Date(e),a=n.getHours(),r=n.getMinutes();return 1===r.toString().length?(t="0".concat(r),"".concat(a,":").concat(t)):"".concat(a,":").concat(r)};e.exports={isUsernameAndHourNeedToBeDisplayed:function(e,t,a){return!(e>=0)||(a[e].username!==t.username||n(a[e].updated_at)!==n(t.updated_at))},formatHour:n}},59:function(e,t,n){e.exports=n(123)},64:function(e,t,n){},95:function(e,t){}},[[59,1,2]]]);
//# sourceMappingURL=main.f8ca42ab.chunk.js.map